import{R as m,r as f,j as e,N as p,a as v,T as w,b as _,c as S,v as B,n as W,B as A,u as z,d as U,S as H,C as M,e as K,f as b,g as q,h as G,i as X,k as Y}from"./vendor.cd19e8b1.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}};J();const Q="modulepreload",C={},Z="/",g=function(t,a){return!a||a.length===0?t():Promise.all(a.map(i=>{if(i=`${Z}${i}`,i in C)return;C[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":Q,o||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),o)return new Promise((d,E)=>{r.addEventListener("load",d),r.addEventListener("error",E)})})).then(()=>t())};var ee="C:\\Projects\\f1predictions-ui\\src\\core\\contexts\\Store.jsx";const k={title:"F1 Predictions",leftAction:null,leftActioinIcon:null,rightAction:null,rightActionIcon:null,showBottomNav:!0},se={drivers:[],grandPrix:[],seasons:[],current_season:null,notifications:[],navbar:k,accessToken:null},I=m.createContext();function te(s,t){switch(t.type){case"SET_DRIVERS":return{...s,drivers:t.payload};case"SET_GRAND_PRIX":return{...s,grandPrix:t.payload};case"SET_SEASONS":return{...s,seasons:t.payload};case"SET_CURRENT_SEASON":return{...s,current_season:t.payload};case"SET_NAVBAR":return{...s,navbar:{...s.navbar,...t.payload}};case"RESET_NAVBAR":return{...s,navbar:k};case"NOTIFY":return{...s,notifications:[...s.notifications,t.payload]};case"REMOVE_NOTIFICATION":return{...s,notifications:s.notifications.filter(a=>a.id!=t.payload)};case"SET_ACCESS_TOKEN":return{...s,accessToken:t.payload};default:return s}}const ie=({children:s})=>{const[t,a]=m.useReducer(te,se);return f.exports.useEffect(()=>{const i=localStorage.getItem("access_token");console.log(i),i&&a({type:"SET_ACCESS_TOKEN",payload:i})},[]),e.exports.jsxDEV(I.Provider,{value:{state:t,dispatch:a},children:s},void 0,!1,{fileName:ee,lineNumber:59,columnNumber:11},globalThis)};function D(){const s=m.useContext(I);if(!s)throw Error("StoreContext must be used within a StoreProvider");return s}var c="C:\\Projects\\f1predictions-ui\\src\\components\\Navbar.jsx";const oe=()=>{const{navbar:s}=D().state;return e.exports.jsxDEV("div",{className:"navbar p-0 d-flex align-items-center  bg-primary text-white ",children:e.exports.jsxDEV("div",{className:"container navbar__content d-flex align-items-centerp-1",children:[e.exports.jsxDEV("div",{className:"navbar__action col d-flex",children:s.leftAction&&e.exports.jsxDEV("button",{onClick:s.leftAction,className:"btn text-white py-0",children:e.exports.jsxDEV("i",{className:`fas ${s.leftActionIcon}`},void 0,!1,{fileName:c,lineNumber:13,columnNumber:22},globalThis)},void 0,!1,{fileName:c,lineNumber:12,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:10,columnNumber:13},globalThis),e.exports.jsxDEV("h4",{className:"mb-0 col-9 py-2 text-nowrap",children:s.title},void 0,!1,{fileName:c,lineNumber:17,columnNumber:13},globalThis),e.exports.jsxDEV("div",{className:"navbar__action col d-flex align-items-end",children:s.rightAction&&e.exports.jsxDEV("button",{onClick:s.rightAction,className:"btn text-white py-0",children:e.exports.jsxDEV("i",{className:`fas ${s.rightActionIcon}`},void 0,!1,{fileName:c,lineNumber:21,columnNumber:22},globalThis)},void 0,!1,{fileName:c,lineNumber:20,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:18,columnNumber:13},globalThis),e.exports.jsxDEV(p,{className:"navbar__nav",defaultActiveKey:"/home",as:"ul",children:[e.exports.jsxDEV(p.Item,{as:"li",children:e.exports.jsxDEV(p.Link,{to:"/",className:"text-white",exact:!0,activeClassName:"fw-bold",as:v,children:"Home"},void 0,!1,{fileName:c,lineNumber:27,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:26,columnNumber:16},globalThis),e.exports.jsxDEV(p.Item,{as:"li",children:e.exports.jsxDEV(p.Link,{to:"/leaderboard",className:"text-white",activeClassName:"fw-bold",as:v,children:"Leaderboards"},void 0,!1,{fileName:c,lineNumber:32,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:31,columnNumber:16},globalThis),e.exports.jsxDEV(p.Item,{as:"li",children:e.exports.jsxDEV(p.Link,{to:"/settings",className:"text-white",activeClassName:"fw-bold",as:v,children:"Settings"},void 0,!1,{fileName:c,lineNumber:37,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:36,columnNumber:16},globalThis),e.exports.jsxDEV(p.Item,{as:"li",children:e.exports.jsxDEV(p.Link,{to:"/admin",className:"text-white",activeClassName:"fw-bold",as:v,children:"Admin"},void 0,!1,{fileName:c,lineNumber:42,columnNumber:19},globalThis)},void 0,!1,{fileName:c,lineNumber:41,columnNumber:16},globalThis)]},void 0,!0,{fileName:c,lineNumber:25,columnNumber:13},globalThis)]},void 0,!0,{fileName:c,lineNumber:9,columnNumber:10},globalThis)},void 0,!1,{fileName:c,lineNumber:8,columnNumber:7},globalThis)};var h="C:\\Projects\\f1predictions-ui\\src\\components\\BottomNavBar.jsx";const le=()=>e.exports.jsxDEV("nav",{className:"bg-primary d-flex",children:[e.exports.jsxDEV(v,{to:"/",exact:!0,activeClassName:"opacity-100",className:"btn btn-link py-2 my-1 col text-white opacity-50",children:e.exports.jsxDEV("i",{className:"fas fa-home"},void 0,!1,{fileName:h,lineNumber:7,columnNumber:13},globalThis)},void 0,!1,{fileName:h,lineNumber:6,columnNumber:10},globalThis),e.exports.jsxDEV(v,{to:"/leaderboard",exact:!0,activeClassName:"opacity-100",className:"btn btn-link py-2 my-1 col text-white opacity-50",children:e.exports.jsxDEV("i",{className:"fas fa-poll"},void 0,!1,{fileName:h,lineNumber:10,columnNumber:13},globalThis)},void 0,!1,{fileName:h,lineNumber:9,columnNumber:10},globalThis),e.exports.jsxDEV(v,{to:"/settings",exact:!0,activeClassName:"opacity-100",className:"btn btn-link py-2 my-1 col text-white opacity-50",children:e.exports.jsxDEV("i",{className:"fas fa-cog"},void 0,!1,{fileName:h,lineNumber:13,columnNumber:13},globalThis)},void 0,!1,{fileName:h,lineNumber:12,columnNumber:10},globalThis),e.exports.jsxDEV(v,{to:"/admin",exact:!0,activeClassName:"opacity-100",className:"btn btn-link py-2 my-1 col text-white opacity-50",children:e.exports.jsxDEV("i",{className:"fas fa-users-cog"},void 0,!1,{fileName:h,lineNumber:16,columnNumber:13},globalThis)},void 0,!1,{fileName:h,lineNumber:15,columnNumber:10},globalThis)]},void 0,!0,{fileName:h,lineNumber:5,columnNumber:7},globalThis);var T="C:\\Projects\\f1predictions-ui\\src\\components\\Toaster.jsx";const ae=()=>{const{state:s,dispatch:t}=D(),{notifications:a}=s,i=f.exports.useMemo(()=>a.length>0?a.reverse()[a.length-1]:null,[a]),o=f.exports.useCallback(l=>{t({type:"REMOVE_NOTIFICATION",payload:l.id})},[t]);return e.exports.jsxDEV(w,{children:e.exports.jsxDEV(_,{show:!!i,autohide:!0,delay:i?.delay||5e3,onClose:()=>o(i),bg:i?.type||"primary",className:"text-white",children:e.exports.jsxDEV(_.Body,{children:e.exports.jsxDEV("div",{className:"d-flex justify-content-between align-items-center",children:[e.exports.jsxDEV("span",{children:i?.text},void 0,!1,{fileName:T,lineNumber:35,columnNumber:19},globalThis),e.exports.jsxDEV("i",{onClick:()=>o(i),className:"fas fa-times text-white"},void 0,!1,{fileName:T,lineNumber:36,columnNumber:19},globalThis)]},void 0,!0,{fileName:T,lineNumber:34,columnNumber:16},globalThis)},void 0,!1,{fileName:T,lineNumber:33,columnNumber:13},globalThis)},void 0,!1,{fileName:T,lineNumber:25,columnNumber:10},globalThis)},void 0,!1,{fileName:T,lineNumber:24,columnNumber:7},globalThis)};function re(s,{initialFetch:t=!0,initialFetchOptions:a={},initialValue:i=null}={}){const[o,l]=m.useState(!1),[r,d]=m.useState(null),[E,u]=m.useState(i),{dispatch:j}=D(),R=m.useCallback(async(L,F)=>{let y=null;y&&clearTimeout(y),y=setTimeout(()=>{l(!0)},10);function $(N){switch(N?.response?.status){case 401:return null;case 403:return"U hebt geen toegang tot die gegevens";case 400:return"Die gegevens bestaan niet of konden niet worden opgevraagd";default:return"Er is iets fout gegaan"}}return await S.get(`https://f1-predictions-backend.herokuapp.com${L}`,{...F}).then(N=>N.data).then(N=>(u(N),N)).catch(N=>(d(N),N?.response?.status!==401&&j({type:"NOTIFY",payload:{id:new Date().getTime(),text:$(N),delay:5e3,type:"danger"}}),N)).finally(()=>{y&&clearTimeout(y),l(!1)})},[]);return m.useEffect(()=>{t&&R(s,a)},[]),{loading:o,data:E,error:r,fetch:R,setError:d,setLoading:l}}const ne="/grand-prix",De="/predictions",ce="/drivers",Ve="/results",P="/seasons";function me(s={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:o,onRegisterError:l}=s;let r,d;const E=async(u=!0)=>{u&&(r==null||r.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()})),d&&d.waiting&&await W(d.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){r=new B("/sw.js",{scope:"/"}),r.addEventListener("activated",u=>{u.isUpdate||i==null||i()});{const u=()=>{a==null||a()};r.addEventListener("waiting",u),r.addEventListener("externalwaiting",u)}r.register({immediate:t}).then(u=>{d=u,o==null||o(u)}).catch(u=>{l==null||l(u)})}return E}function O(s={}){const{immediate:t=!0,onNeedRefresh:a,onOfflineReady:i,onRegistered:o,onRegisterError:l}=s,[r,d]=f.exports.useState(!1),[E,u]=f.exports.useState(!1),[j]=f.exports.useState(()=>me({immediate:t,onOfflineReady(){u(!0),i==null||i()},onNeedRefresh(){d(!0),a==null||a()},onRegistered:o,onRegisterError:l}));return{needRefresh:[r,d],offlineReady:[E,u],updateServiceWorker:j}}var x="C:\\Projects\\f1predictions-ui\\src\\components\\ReloadPrompt.jsx";function ue(){const{offlineReady:[s,t],needRefresh:[a,i],updateServiceWorker:o}=O({onRegistered(r){console.log("SW Registered")},onRegisterError(r){console.log("SW registration error",r)}}),l=()=>{t(!1),i(!1)};return e.exports.jsxDEV(w,{className:"position-fixed ",style:{bottom:"90px",left:"50%",transform:"translateX(-50%)"},children:a&&e.exports.jsxDEV(_,{className:"d-inline-block m-1 shadow-lg",bg:"light",onClose:l,children:[e.exports.jsxDEV(_.Header,{children:[e.exports.jsxDEV("img",{src:"/assets/logo.png",height:"20px",className:"rounded me-2",alt:""},void 0,!1,{fileName:x,lineNumber:32,columnNumber:19},this),e.exports.jsxDEV("strong",{className:"me-auto",children:"Update available"},void 0,!1,{fileName:x,lineNumber:33,columnNumber:19},this)]},void 0,!0,{fileName:x,lineNumber:31,columnNumber:16},this),e.exports.jsxDEV(_.Body,{children:[e.exports.jsxDEV("p",{children:"New content is available, click on update button to get the newest features."},void 0,!1,{fileName:x,lineNumber:36,columnNumber:19},this),e.exports.jsxDEV(A,{onClick:o,variant:"primary",children:"Update"},void 0,!1,{fileName:x,lineNumber:37,columnNumber:19},this),e.exports.jsxDEV(A,{onClick:o,variant:"link",className:"text-dark text-decoration-none",children:"Close"},void 0,!1,{fileName:x,lineNumber:40,columnNumber:19},this)]},void 0,!0,{fileName:x,lineNumber:35,columnNumber:16},this)]},void 0,!0,{fileName:x,lineNumber:30,columnNumber:13},this)},void 0,!1,{fileName:x,lineNumber:28,columnNumber:7},this)}var de="C:\\Projects\\f1predictions-ui\\src\\pages\\Callback.jsx";const Ne=()=>{const{push:s}=z(),{search:t}=U(),{dispatch:a}=D(),i=f.exports.useMemo(()=>new URLSearchParams(t).get("state"),[t]);return f.exports.useEffect(()=>{i&&(localStorage.setItem("access_token",i),a({type:"SET_ACCESS_TOKEN",payload:i}),s("/"))},[i]),e.exports.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:de,lineNumber:21,columnNumber:11},globalThis)};var n="C:\\Projects\\f1predictions-ui\\src\\App.jsx";const fe=m.lazy(()=>g(()=>import("./Home.0b6b7139.js").then(function(s){return s.H}),["assets/Home.0b6b7139.js","assets/vendor.cd19e8b1.js"])),be=m.lazy(()=>g(()=>import("./SignIn.87e39f65.js"),["assets/SignIn.87e39f65.js","assets/vendor.cd19e8b1.js","assets/useNavbar.f454c3a2.js"])),pe=m.lazy(()=>g(()=>import("./PredictionForm.70a25011.js"),["assets/PredictionForm.70a25011.js","assets/vendor.cd19e8b1.js","assets/usePost.de530e4c.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/useNavbar.f454c3a2.js"])),he=m.lazy(()=>g(()=>import("./Result.b3c7c7fa.js"),["assets/Result.b3c7c7fa.js","assets/vendor.cd19e8b1.js","assets/useNavbar.f454c3a2.js"])),xe=m.lazy(()=>g(()=>import("./Leaderboard.335508d9.js"),["assets/Leaderboard.335508d9.js","assets/vendor.cd19e8b1.js","assets/useNavbar.f454c3a2.js"])),ve=m.lazy(()=>g(()=>import("./Admin.b912e351.js"),["assets/Admin.b912e351.js","assets/vendor.cd19e8b1.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/useNavbar.f454c3a2.js"])),ge=m.lazy(()=>g(()=>import("./Settings.ff99b0c3.js"),["assets/Settings.ff99b0c3.js","assets/vendor.cd19e8b1.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js"])),Ee=m.lazy(()=>g(()=>import("./ResultsForm.73b984fb.js"),["assets/ResultsForm.73b984fb.js","assets/vendor.cd19e8b1.js","assets/usePost.de530e4c.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/useNavbar.f454c3a2.js"])),Te=60*60*1e3,je=()=>e.exports.jsxDEV("div",{className:"d-flex align-items-center justify-content-center",style:{width:"100vw",height:"100vh"},children:e.exports.jsxDEV(G,{size:"lg",animation:"border",role:"status",variant:"primary",children:e.exports.jsxDEV("span",{className:"visually-hidden",children:"Loading..."},void 0,!1,{fileName:n,lineNumber:33,columnNumber:13},globalThis)},void 0,!1,{fileName:n,lineNumber:32,columnNumber:10},globalThis)},void 0,!1,{fileName:n,lineNumber:31,columnNumber:7},globalThis),ye=()=>{const{state:s,dispatch:t}=D(),{fetch:a}=re(null,{initialFetch:!1}),{current_season:i,accessToken:o}=s;return f.exports.useEffect(async()=>{o&&(await a(ce).then(l=>t({type:"SET_DRIVERS",payload:l})),await a(P).then(l=>{t({type:"SET_SEASONS",payload:l}),t({type:"SET_CURRENT_SEASON",payload:l.find(r=>r.year==new Date().getFullYear())})}))},[o]),f.exports.useEffect(async()=>{i&&await a(`${P}/${i.id}${ne}`).then(l=>t({type:"SET_GRAND_PRIX",payload:l.sort((r,d)=>new Date(r.qualifying_start_timestamp)-new Date(d.qualifying_start_timestamp))}))},[i]),O({onRegistered(l){l&&setInterval(()=>{l.update()},Te)}}),e.exports.jsxDEV(f.exports.Suspense,{fallback:e.exports.jsxDEV(je,{},void 0,!1,{fileName:n,lineNumber:76,columnNumber:27},globalThis),children:e.exports.jsxDEV("div",{className:"app",children:[e.exports.jsxDEV(H,{style:{width:"100vw"},children:[e.exports.jsxDEV("div",{className:"app__navbar sticky-top",children:e.exports.jsxDEV(oe,{},void 0,!1,{fileName:n,lineNumber:80,columnNumber:19},globalThis)},void 0,!1,{fileName:n,lineNumber:79,columnNumber:16},globalThis),e.exports.jsxDEV(M,{className:"py-3",style:{minHeight:"calc(100vh - 100px)"},children:e.exports.jsxDEV(K,{children:[e.exports.jsxDEV(b,{path:"/login",component:be},void 0,!1,{fileName:n,lineNumber:84,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/",component:fe},void 0,!1,{fileName:n,lineNumber:85,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/prediction/:id",component:pe},void 0,!1,{fileName:n,lineNumber:86,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/result/:id",component:he},void 0,!1,{fileName:n,lineNumber:87,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/leaderboard",component:xe},void 0,!1,{fileName:n,lineNumber:88,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/admin",component:ve},void 0,!1,{fileName:n,lineNumber:89,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/admin/result/:id",component:Ee},void 0,!1,{fileName:n,lineNumber:90,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/settings",component:ge},void 0,!1,{fileName:n,lineNumber:91,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"/callback",component:Ne},void 0,!1,{fileName:n,lineNumber:92,columnNumber:22},globalThis),e.exports.jsxDEV(b,{exact:!0,path:"*",render:()=>e.exports.jsxDEV(q,{to:"/"},void 0,!1,{fileName:n,lineNumber:93,columnNumber:58},globalThis)},void 0,!1,{fileName:n,lineNumber:93,columnNumber:22},globalThis)]},void 0,!0,{fileName:n,lineNumber:83,columnNumber:19},globalThis)},void 0,!1,{fileName:n,lineNumber:82,columnNumber:16},globalThis),s.navbar.showBottomNav&&e.exports.jsxDEV("div",{className:"app__bottom-navbar position-sticky",style:{bottom:"0",width:"100vw"},children:e.exports.jsxDEV(le,{},void 0,!1,{fileName:n,lineNumber:98,columnNumber:22},globalThis)},void 0,!1,{fileName:n,lineNumber:97,columnNumber:19},globalThis)]},void 0,!0,{fileName:n,lineNumber:78,columnNumber:13},globalThis),e.exports.jsxDEV("div",{className:"app__toaster",children:e.exports.jsxDEV(ae,{},void 0,!1,{fileName:n,lineNumber:103,columnNumber:16},globalThis)},void 0,!1,{fileName:n,lineNumber:102,columnNumber:13},globalThis),e.exports.jsxDEV(ue,{},void 0,!1,{fileName:n,lineNumber:105,columnNumber:13},globalThis)]},void 0,!0,{fileName:n,lineNumber:77,columnNumber:10},globalThis)},void 0,!1,{fileName:n,lineNumber:76,columnNumber:7},globalThis)};S.interceptors.request.use(function(s){s.headers={...s.headers,Accept:"application/json","Content-Type":"application/json"};const t=localStorage.getItem("access_token");return t&&(s.headers={...s.headers,Authorization:`Bearer ${t}`}),s},function(s){return Promise.reject(s)});S.interceptors.response.use(function(s){return s},function(s){return s.response.status===401&&window.location.pathname!=="/login"&&window.location.replace(window.location.origin+`/login?redirect_uri=${window.location.href}`),Promise.reject(s)});var V="C:\\Projects\\f1predictions-ui\\src\\main.jsx";X.render(e.exports.jsxDEV(m.StrictMode,{children:e.exports.jsxDEV(Y,{children:e.exports.jsxDEV(ie,{children:e.exports.jsxDEV(ye,{},void 0,!1,{fileName:V,lineNumber:14,columnNumber:13},globalThis)},void 0,!1,{fileName:V,lineNumber:13,columnNumber:10},globalThis)},void 0,!1,{fileName:V,lineNumber:12,columnNumber:7},globalThis)},void 0,!1,{fileName:V,lineNumber:11,columnNumber:4},globalThis),document.getElementById("root"));export{Ve as A,g as _,D as a,ne as b,De as c,P as d,re as u};
