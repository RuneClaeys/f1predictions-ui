import{_ as d,a as S,u as I,b as g,A}from"./index.30d58bed.js";import{R as n,l as O,u as k,r as c,j as e,P as B,B as b}from"./vendor.cd19e8b1.js";import{u as L,F as C,v as G}from"./usePost.de530e4c.js";import{F as $}from"./Form.04ff9b1d.js";import{u as z}from"./useNavbar.f454c3a2.js";import"./warning.b33cdbd2.js";import"./Col.d30fc8fd.js";var a="C:\\Projects\\f1predictions-ui\\src\\pages\\ResultsForm.jsx";const M=n.lazy(()=>d(()=>import("./QualifyingForm.8905762a.js"),["assets/QualifyingForm.8905762a.js","assets/vendor.cd19e8b1.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/index.30d58bed.js","assets/index.de26fa69.css"])),Q=n.lazy(()=>d(()=>import("./RaceForm.79cd50ba.js"),["assets/RaceForm.79cd50ba.js","assets/vendor.cd19e8b1.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/index.30d58bed.js","assets/index.de26fa69.css"])),Y=n.lazy(()=>d(()=>import("./ExtraForm.472176bb.js"),["assets/ExtraForm.472176bb.js","assets/vendor.cd19e8b1.js","assets/Form.04ff9b1d.js","assets/warning.b33cdbd2.js","assets/Col.d30fc8fd.js","assets/index.30d58bed.js","assets/index.de26fa69.css"])),Z=()=>{const[f,m]=n.useState(!1),[s,N]=n.useState(0),{id:p}=O(),{push:x,goBack:j}=k(),{dispatch:E}=S(),{data:o,loading:v}=I(`${g}/${p}`);c.exports.useEffect(()=>{o&&new Date(o.qualifying_start_timestamp)>new Date&&(E({type:"NOTIFY",payload:{id:new Date().getTime(),text:"Grand Prix hasn't passed",delay:5e3,type:"danger"}}),x("/admin"))},[o]);const D=c.exports.useMemo(()=>({title:`${o?.name} - Results`||"Loading...",leftAction:j,leftActionIcon:"fa-arrow-left",showBottomNav:!1}),[o]);z(D);const{fetch:_,loading:h}=L();async function y(t){await _(g+`/${p}`+A,{result_entries:Object.entries(t).map(([i,r])=>({name:i,driver_id:r}))}).then(()=>{x("/admin")})}async function V(t){const i=await t();Object.keys(i).length<=0?(N(s+1),m(!1)):m(!0)}function T(){N(s-1)}const l=c.exports.useMemo(()=>v||h,[v,h]);return e.exports.jsxDEV("div",{className:"form-container",children:e.exports.jsxDEV(C,{validationSchema:G[s],validateOnChange:f,validateOnBlur:f,initialValues:{},onSubmit:y,children:({handleSubmit:t,handleChange:i,values:r,errors:u,validateForm:P,dirty:F,submitCount:w})=>e.exports.jsxDEV(e.exports.Fragment,{children:[e.exports.jsxDEV(B,{when:F&&w<1,message:"You have unsaved changes, are you sure you want to leave?"},void 0,!1,{fileName:a,lineNumber:94,columnNumber:19},globalThis),e.exports.jsxDEV($,{noValidate:!0,onSubmit:R=>{R.preventDefault(),t(),m(!0)},children:[s===0&&e.exports.jsxDEV(M,{handleChange:i,errors:u,values:r,disabled:l},void 0,!1,{fileName:a,lineNumber:103,columnNumber:42},globalThis),s===1&&e.exports.jsxDEV(Q,{handleChange:i,errors:u,values:r,disabled:l},void 0,!1,{fileName:a,lineNumber:104,columnNumber:42},globalThis),s===2&&e.exports.jsxDEV(Y,{handleChange:i,errors:u,values:r,disabled:l},void 0,!1,{fileName:a,lineNumber:105,columnNumber:42},globalThis),e.exports.jsxDEV("div",{className:"d-flex py-3 w-10 position-sticky bg-white gap-4",style:{bottom:0},children:[s!==0&&e.exports.jsxDEV(b,{onClick:T,variant:"outline-primary",type:"button",className:"col-3",disabled:l,children:[e.exports.jsxDEV("i",{className:"fas fa-arrow-left"},void 0,!1,{fileName:a,lineNumber:109,columnNumber:31},globalThis),e.exports.jsxDEV("span",{className:"ms-3",children:"Back"},void 0,!1,{fileName:a,lineNumber:110,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:108,columnNumber:28},globalThis),s<2&&e.exports.jsxDEV(b,{onClick:()=>V(P),variant:"primary",type:"button",className:"col",disabled:l,children:[e.exports.jsxDEV("span",{className:"me-3",children:"Next"},void 0,!1,{fileName:a,lineNumber:121,columnNumber:31},globalThis),e.exports.jsxDEV("i",{className:"fas fa-arrow-right"},void 0,!1,{fileName:a,lineNumber:122,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:114,columnNumber:28},globalThis),s===2&&e.exports.jsxDEV(b,{variant:"primary",type:"submit",className:"col",disabled:l,children:[e.exports.jsxDEV("span",{className:"me-3",children:"Save"},void 0,!1,{fileName:a,lineNumber:127,columnNumber:31},globalThis),e.exports.jsxDEV("i",{className:"fas fa-save"},void 0,!1,{fileName:a,lineNumber:128,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:126,columnNumber:28},globalThis)]},void 0,!0,{fileName:a,lineNumber:106,columnNumber:22},globalThis)]},void 0,!0,{fileName:a,lineNumber:95,columnNumber:19},globalThis)]},void 0,!0)},void 0,!1,{fileName:a,lineNumber:85,columnNumber:10},globalThis)},void 0,!1,{fileName:a,lineNumber:84,columnNumber:7},globalThis)};export{Z as default};
