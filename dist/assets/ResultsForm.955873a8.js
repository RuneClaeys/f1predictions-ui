import{_ as c,a as S,u as I,b as g,A}from"./index.bb6c9dee.js";import{R as n,n as O,o as k,r as d,j as e,P as B}from"./vendor.bc1ab3cb.js";import{u as L,F as C,v as G}from"./usePost.079a5499.js";import{F as $}from"./Form.20b68b77.js";import{B as b}from"./Button.39aee972.js";import{u as z}from"./useNavbar.f85b55f5.js";import"./warning.b33cdbd2.js";import"./Col.afe966fa.js";var a="C:\\Projects\\f1predictions-ui\\src\\pages\\ResultsForm.jsx";const M=n.lazy(()=>c(()=>import("./QualifyingForm.38a5c4e4.js"),["assets/QualifyingForm.38a5c4e4.js","assets/vendor.bc1ab3cb.js","assets/Form.20b68b77.js","assets/warning.b33cdbd2.js","assets/Col.afe966fa.js","assets/index.bb6c9dee.js","assets/index.de26fa69.css"])),Q=n.lazy(()=>c(()=>import("./RaceForm.93a8a8be.js"),["assets/RaceForm.93a8a8be.js","assets/vendor.bc1ab3cb.js","assets/Form.20b68b77.js","assets/warning.b33cdbd2.js","assets/Col.afe966fa.js","assets/index.bb6c9dee.js","assets/index.de26fa69.css"])),Y=n.lazy(()=>c(()=>import("./ExtraForm.f54a5639.js"),["assets/ExtraForm.f54a5639.js","assets/vendor.bc1ab3cb.js","assets/Form.20b68b77.js","assets/warning.b33cdbd2.js","assets/Col.afe966fa.js","assets/index.bb6c9dee.js","assets/index.de26fa69.css"])),ee=()=>{const[f,m]=n.useState(!1),[s,N]=n.useState(0),{id:p}=O(),{push:x,goBack:j}=k(),{dispatch:E}=S(),{data:l,loading:v}=I(`${g}/${p}`);d.exports.useEffect(()=>{l&&new Date(l.qualifying_start_timestamp)>new Date&&(E({type:"NOTIFY",payload:{id:new Date().getTime(),text:"Grand Prix hasn't passed",delay:5e3,type:"danger"}}),x("/admin"))},[l]);const D=d.exports.useMemo(()=>({title:`${l?.name} - Results`||"Loading...",leftAction:j,leftActionIcon:"fa-arrow-left",showBottomNav:!1}),[l]);z(D);const{fetch:_,loading:h}=L();async function y(t){await _(g+`/${p}`+A,{result_entries:Object.entries(t).map(([i,r])=>({name:i,driver_id:r}))}).then(()=>{x("/admin")})}async function V(t){const i=await t();Object.keys(i).length<=0?(N(s+1),m(!1)):m(!0)}function T(){N(s-1)}const o=d.exports.useMemo(()=>v||h,[v,h]);return e.exports.jsxDEV("div",{className:"form-container",children:e.exports.jsxDEV(C,{validationSchema:G[s],validateOnChange:f,validateOnBlur:f,initialValues:{},onSubmit:y,children:({handleSubmit:t,handleChange:i,values:r,errors:u,validateForm:P,dirty:F,submitCount:w})=>e.exports.jsxDEV(e.exports.Fragment,{children:[e.exports.jsxDEV(B,{when:F&&w<1,message:"You have unsaved changes, are you sure you want to leave?"},void 0,!1,{fileName:a,lineNumber:94,columnNumber:19},globalThis),e.exports.jsxDEV($,{noValidate:!0,onSubmit:R=>{R.preventDefault(),t(),m(!0)},children:[s===0&&e.exports.jsxDEV(M,{handleChange:i,errors:u,values:r,disabled:o},void 0,!1,{fileName:a,lineNumber:103,columnNumber:42},globalThis),s===1&&e.exports.jsxDEV(Q,{handleChange:i,errors:u,values:r,disabled:o},void 0,!1,{fileName:a,lineNumber:104,columnNumber:42},globalThis),s===2&&e.exports.jsxDEV(Y,{handleChange:i,errors:u,values:r,disabled:o},void 0,!1,{fileName:a,lineNumber:105,columnNumber:42},globalThis),e.exports.jsxDEV("div",{className:"d-flex py-3 w-10 position-sticky bg-white gap-4",style:{bottom:0},children:[s!==0&&e.exports.jsxDEV(b,{onClick:T,variant:"outline-primary",type:"button",className:"col-3",disabled:o,children:[e.exports.jsxDEV("i",{className:"fas fa-arrow-left"},void 0,!1,{fileName:a,lineNumber:109,columnNumber:31},globalThis),e.exports.jsxDEV("span",{className:"ms-3",children:"Back"},void 0,!1,{fileName:a,lineNumber:110,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:108,columnNumber:28},globalThis),s<2&&e.exports.jsxDEV(b,{onClick:()=>V(P),variant:"primary",type:"button",className:"col",disabled:o,children:[e.exports.jsxDEV("span",{className:"me-3",children:"Next"},void 0,!1,{fileName:a,lineNumber:121,columnNumber:31},globalThis),e.exports.jsxDEV("i",{className:"fas fa-arrow-right"},void 0,!1,{fileName:a,lineNumber:122,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:114,columnNumber:28},globalThis),s===2&&e.exports.jsxDEV(b,{variant:"primary",type:"submit",className:"col",disabled:o,children:[e.exports.jsxDEV("span",{className:"me-3",children:"Save"},void 0,!1,{fileName:a,lineNumber:127,columnNumber:31},globalThis),e.exports.jsxDEV("i",{className:"fas fa-save"},void 0,!1,{fileName:a,lineNumber:128,columnNumber:31},globalThis)]},void 0,!0,{fileName:a,lineNumber:126,columnNumber:28},globalThis)]},void 0,!0,{fileName:a,lineNumber:106,columnNumber:22},globalThis)]},void 0,!0,{fileName:a,lineNumber:95,columnNumber:19},globalThis)]},void 0,!0)},void 0,!1,{fileName:a,lineNumber:85,columnNumber:10},globalThis)},void 0,!1,{fileName:a,lineNumber:84,columnNumber:7},globalThis)};export{ee as default};
